<script setup lang="ts">
import {computed, ref} from "vue";

const inputRef = ref("å¤å¤ç±³");
const now = new Date().getFullYear();
const yearAgo = computed(() => {
  return (inputRef.value.match(/å¤/g) || []).length;
});
const year = computed(() => now - yearAgo.value);

const messages = [
  { message: "ãƒ”ã‚«ãƒ”ã‚«ã®æ–°ç±³ï¼ç‚Šãç«‹ã¦æœ€é«˜ï¼", year: 1 },
  { message: "ã¾ã ã¾ã ã‚¤ã‚±ã‚‹ã€ã¡ã‚‡ã„å¤ç±³ï¼", year: 2 },
  { message: "ãã‚ãã‚å‘³ã«æ·±ã¿ãŒâ€¦ï¼Ÿ", year: 3 },
  { message: "ãŠç±³ã‚‚äººç”Ÿã‚‚ç†ŸæˆãŒå¤§äº‹ã€‚", year: 4 },
  { message: "ã‚¿ã‚¤ãƒ ã‚«ãƒ—ã‚»ãƒ«ç´šã®å¤ã•ï¼", year: 5 },
  { message: "ä¼èª¬ã®å¤ç±³ã€ã‚‚ã¯ã‚„ç¥è©±ã€‚", year: 6 },
  { message: "è€ƒå¤å­¦è€…ãŒæ¬²ã—ãŒã‚‹è²´é‡ãªä¸€å“ï¼", year: 7 },
  { message: "ç¸„æ–‡æ™‚ä»£ã‹ã‚‰ã‚¿ã‚¤ãƒ ã‚¹ãƒªãƒƒãƒ—ã—ãŸç±³ï¼Ÿ", year: 8 },
  { message: "æç«œã‚‚é£Ÿã¹ã¦ã„ãŸã‹ã‚‚â€¦ï¼Ÿ", year: 9 },
  { message: "ä¸€ç²’ã§åå¹´åˆ†ã®æ­´å²ã‚’å‘³ã‚ãˆã‚‹ï¼", year: 10 },
  { message: "ã‚‚ã¯ã‚„åŒ–çŸ³ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³å…¥ã‚Šç¢ºå®šï¼", year: 15 },
  { message: "ã“ã‚Œã¯ç±³ï¼Ÿãã‚Œã¨ã‚‚æ­´å²çš„éºç‰©ï¼Ÿ", year: 20 },
  { message: "åšç‰©é¤¨ã«å¯„è´ˆã™ã¹ãæ–‡åŒ–è²¡ãƒ¬ãƒ™ãƒ«ï¼", year: 25 },
  { message: "å®‡å®™ã®å§‹ã¾ã‚Šã‚’çŸ¥ã‚‹å¤ä»£ç±³ï¼", year: 30 },
  { message: "ã‚¿ã‚¤ãƒ ãƒã‚·ãƒ³ã§éå»ã‹ã‚‰æŒã£ã¦ããŸï¼Ÿ", year: 35 },
  { message: "è€ƒå¤å­¦è€…ã€Œæ–°ç™ºè¦‹ã§ã™ï¼ã€", year: 40 },
  { message: "ãŠã«ãã‚Šã«ã™ã‚‹ã¨æ™‚ç©ºãŒæ­ªã‚€ï¼ï¼Ÿ", year: 45 },
  { message: "ã“ã‚Œã‚’é£Ÿã¹ã‚‹ã¨ä¸è€ä¸æ­»ã«ãªã‚‹ã‹ã‚‚â€¦", year: 50 },
  { message: "ãƒ”ãƒ©ãƒŸãƒƒãƒ‰å»ºè¨­æ™‚ã«åŸ‹ã‚ã‚‰ã‚Œã¦ã„ãŸï¼ï¼Ÿ", year: 55 },
  { message: "ã‚¢ãƒˆãƒ©ãƒ³ãƒ†ã‚£ã‚¹æ–‡æ˜ã®éºç”£", year: 60 },
  { message: "ã“ã®ãŠç±³ã€æç«œçµ¶æ»…ã®åŸå› èª¬", year: 65 },
  { message: "ãƒ“ãƒƒã‚°ãƒãƒ³ç›´å¾Œã‹ã‚‰å­˜åœ¨ï¼Ÿ", year: 70 },
  { message: "ãƒ‘ãƒ©ãƒ¬ãƒ«ãƒ¯ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰ã®æ¥è¨ªè€…", year: 75 },
  { message: "å®‡å®™äººãŒæ®‹ã—ã¦ã„ã£ãŸè¬ã®ç‰©ä½“", year: 80 },
  { message: "ã‚‚ã¯ã‚„å›½å®ç´šï¼è§¦ã‚‹ã®ã‚‚è¨±å¯åˆ¶", year: 85 },
  { message: "æ™‚ç©ºã‚’è¶…ãˆãŸå¤ä»£ã®å¡æ™º", year: 90 },
  { message: "ãŠç±³ã®æ¦‚å¿µã‚’è¶…è¶Šã—ãŸå­˜åœ¨", year: 95 },
  { message: "ä¸€ç²’ã§å®‡å®™ã®å§‹ã¾ã‚Šã‚’æ„Ÿã˜ã‚‹", year: 100 }
];

const selectedMessage = computed(() => {
  // yearAgoã«æœ€ã‚‚è¿‘ã„å¹´æ•°ã‚’æŒã¤ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¢ã™
  const sortedMessages = [...messages].sort((a, b) =>
      Math.abs(a.year - yearAgo.value) - Math.abs(b.year - yearAgo.value)
  );
  return sortedMessages[0];
});
</script>

<template>
  <div class="rice-calculator">
    <h1 class="text-5xl font-bold text-center my-16 animate-bounce text-yellow-600">ğŸŒ¾ å¤ç±³ã‚¿ã‚¤ãƒ ãƒã‚·ãƒ³ ğŸŒ¾</h1>
    <h2 class="text-3xl font-bold text-center my-8 bg-gradient-to-r from-amber-500 to-yellow-300 text-transparent bg-clip-text">
      ã‚ãªãŸã®ãŠç±³ã¯<span class="text-4xl text-pink-800 animate-pulse">{{year}}å¹´</span>ã«æ¡ã‚Œã¾ã—ãŸï¼
    </h2>
    <div class="message-box p-6 bg-yellow-100 rounded-xl border-4 border-amber-400 shadow-xl max-w-[800px] mx-auto my-8">
      <h3 class="text-2xl text-pink-600 font-bold text-center italic">ã€{{ selectedMessage.message }}ã€</h3>
    </div>
    <div class="flex max-w-[1000px] items-center justify-center mx-auto">
      <div class="rice-input-container bg-amber-50 p-6 rounded-2xl shadow-lg">
        <label class="block text-lg text-amber-800 font-bold mb-2">â­ ã‚ãªãŸã®ãŠç±³ã®çŠ¶æ…‹ã‚’æ•™ãˆã¦ â­</label>
        <input class="ring-2 ring-amber-400 rounded-2xl p-4 text-xl w-full" v-model="inputRef" placeholder="å¤å¤ç±³" />
        <p class="text-sm text-gray-500 mt-2">ãƒ’ãƒ³ãƒˆï¼šã€Œå¤ã€ã‚’è¿½åŠ ã™ã‚‹ã»ã©å¹´ä»£ãŒå¤ããªã‚Šã¾ã™ï¼</p>
      </div>
    </div>
  </div>
</template>

<style>
@import "tailwindcss";
</style>
